{% extends "base.html" %}
{% load i18n %}
{% block title %}{{ block.super }} list{% endblock title %}
{% block content %}
<h1>{% trans "pages"|capfirst %}</h1>
<div class="toolbar">
    <a class="button" href="{% url "page_create" %}?next={{ next|urlencode}}">{% trans "create new"|title %}</a>   
    <form method="get" action="{{ request.path }}">
        <select name="owner" onchange="this.form.submit();">
            <option value="">{% trans "filter by owner"|capfirst %}</option>
            {% for user in user_list %}
                <option value="{{ user.username }}" {% if user.username == request.GET.owner %}selected{% endif %}>{{ user.first_name }} {{ user.last_name }} ({{ user.username }})</option>
            {% endfor %}
        </select>
        <select name="category" onchange="this.form.submit();">
            <option value="">{% trans "filter by category"|capfirst %}</option>
            {% for category in category_list %}
                <option value="{{ category.pk }}" {% if category.pk|slugify == request.GET.category %}selected{% endif %}>{{ category.name }}</option>
            {% endfor %}
        </select>
        <input type="text" name="search_name" value="{{ request.GET.search_name }}" placeholder={%trans "search by name..."|capfirst %}>
        <button type="submit">&#128269;</button>
    </form>
</div>
<ul>
    <li class="list-table-header">
        <span>{% trans "name"|capfirst %}</span>        
    </li>
{% for page in page_list %}
<li><a href="{% url "page_published" page.pk %}?next={{next|urlencode}}">
    {% if page.is_published %}&#x2611;{% else %}&#x2610;{% endif %}</a>      
    <a href="{% url "page_detail" page.pk %}?next={{ next|urlencode}}">{{ page.name }}</a>    
</li>
{% endfor %}
</ul>
{% endblock content %}